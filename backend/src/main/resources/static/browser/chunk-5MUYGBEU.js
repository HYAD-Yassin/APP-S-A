import{a as ot}from"./chunk-54CGRIOD.js";import{a as lt,b as ct}from"./chunk-2IZELCUF.js";import{Aa as a,Ba as b,C as V,Ca as S,Da as K,F as j,G as Z,Ia as I,J as z,K as X,L as o,Ma as M,N as Y,Oa as N,Pa as W,Q as l,R as A,V as J,W as Q,Y as L,Ya as tt,_ as g,bb as et,c as $,cb as it,eb as nt,fb as rt,gb as st,ha as s,hb as at,ia as r,ib as T,ja as d,q as E,r as x,t as w,tb as B,u as F,x as v,xa as q,y,ya as G}from"./chunk-3AFXCYAS.js";import{a as R,b as U,e as _}from"./chunk-6MDQTQU3.js";var xt=["chart"],dt=(()=>{class i{constructor(){this.chart=o(),this.annotations=o(),this.colors=o(),this.dataLabels=o(),this.series=o(),this.stroke=o(),this.labels=o(),this.legend=o(),this.markers=o(),this.noData=o(),this.fill=o(),this.tooltip=o(),this.plotOptions=o(),this.responsive=o(),this.xaxis=o(),this.yaxis=o(),this.forecastDataPoints=o(),this.grid=o(),this.states=o(),this.title=o(),this.subtitle=o(),this.theme=o(),this.autoUpdateSeries=o(!0),this.chartReady=X(),this.chartInstance=J(null),this.chartElement=Q.required("chart"),this.ngZone=F(z),this.isBrowser=at(F(Y))}ngOnChanges(t){this.isBrowser&&this.ngZone.runOutsideAngular(()=>{$.schedule(()=>this.hydrate(t))})}ngOnDestroy(){this.destroy()}hydrate(t){if(this.autoUpdateSeries()&&Object.keys(t).filter(n=>n!=="series").length===0){this.updateSeries(this.series(),!0);return}this.createElement()}createElement(){return _(this,null,function*(){let{default:t}=yield import("./chunk-LY27RTDF.js");window.ApexCharts||=t;let e={};["annotations","chart","colors","dataLabels","series","stroke","labels","legend","fill","tooltip","plotOptions","responsive","markers","noData","xaxis","yaxis","forecastDataPoints","grid","states","title","subtitle","theme"].forEach(m=>{let h=this[m]();h&&(e[m]=h)}),this.destroy();let p=this.ngZone.runOutsideAngular(()=>new t(this.chartElement().nativeElement,e));this.chartInstance.set(p),this.render(),this.chartReady.emit({chartObj:p})})}render(){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.render())}updateOptions(t,e,n,p){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateOptions(t,e,n,p))}updateSeries(t,e){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.updateSeries(t,e))}appendSeries(t,e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendSeries(t,e))}appendData(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.appendData(t))}highlightSeries(t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.highlightSeries(t))}toggleSeries(t){return this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleSeries(t))}showSeries(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.showSeries(t))}hideSeries(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.hideSeries(t))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.resetSeries())}zoomX(t,e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.zoomX(t,e))}toggleDataPointSelection(t,e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.toggleDataPointSelection(t,e))}destroy(){this.chartInstance()?.destroy(),this.chartInstance.set(null)}setLocale(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.setLocale(t))}paper(){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.paper())}addXaxisAnnotation(t,e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addXaxisAnnotation(t,e,n))}addYaxisAnnotation(t,e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addYaxisAnnotation(t,e,n))}addPointAnnotation(t,e,n){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.addPointAnnotation(t,e,n))}removeAnnotation(t,e){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.removeAnnotation(t,e))}clearAnnotations(t){this.ngZone.runOutsideAngular(()=>this.chartInstance()?.clearAnnotations(t))}dataURI(t){return this.chartInstance()?.dataURI(t)}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=v({type:i,selectors:[["apx-chart"]],viewQuery:function(e,n){e&1&&q(n.chartElement,xt,5),e&2&&G()},inputs:{chart:[1,"chart"],annotations:[1,"annotations"],colors:[1,"colors"],dataLabels:[1,"dataLabels"],series:[1,"series"],stroke:[1,"stroke"],labels:[1,"labels"],legend:[1,"legend"],markers:[1,"markers"],noData:[1,"noData"],fill:[1,"fill"],tooltip:[1,"tooltip"],plotOptions:[1,"plotOptions"],responsive:[1,"responsive"],xaxis:[1,"xaxis"],yaxis:[1,"yaxis"],forecastDataPoints:[1,"forecastDataPoints"],grid:[1,"grid"],states:[1,"states"],title:[1,"title"],subtitle:[1,"subtitle"],theme:[1,"theme"],autoUpdateSeries:[1,"autoUpdateSeries"]},outputs:{chartReady:"chartReady"},standalone:!0,features:[V,I],decls:2,vars:0,consts:[["chart",""]],template:function(e,n){e&1&&d(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return i})();var pt=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=y({type:i})}static{this.\u0275inj=x({})}}return i})();var ht=(()=>{class i{constructor(t){this.http=t}getTransactions(t){return this.http.get(`/api/transactions/card/${t}`)}static{this.\u0275fac=function(e){return new(e||i)(w(T))}}static{this.\u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var mt=(()=>{class i{constructor(t,e){this.themeService=t,this.transactionService=e,this.cardIds=JSON.parse(localStorage.getItem("cardIds")||"[]"),this.finalBalance=0;let n="#FFFFFF",p=[],m=1e3,h=[],f=[];this.cardIds.forEach(c=>{this.transactionService.getTransactions(c).subscribe(C=>{p=[...p,...C],p.sort((u,D)=>new Date(u.transactionDate).getTime()-new Date(D.transactionDate).getTime()),h.length=0,f.length=0,this.finalBalance=0,console.log("All Transactions  :",p),p.forEach(u=>{m+=u.amount,h.push(m);let D=new Date(u.transactionDate).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"});f.push(D)}),this.finalBalance=m,console.log("Final Balance  :",this.finalBalance),this.chartOptions.series=[{name:"Balance",data:h}],this.chartOptions.xaxis=U(R({},this.chartOptions.xaxis),{categories:f})},C=>{console.error(`Error fetching transactions for card ${c}:`,C)})}),this.chartOptions={series:[{name:"Etherium",data:h}],chart:{fontFamily:"inherit",type:"area",height:150,toolbar:{show:!1},sparkline:{enabled:!0}},dataLabels:{enabled:!1},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.4,opacityTo:.2,stops:[15,120,100]}},stroke:{curve:"smooth",show:!0,width:3,colors:[n]},xaxis:{categories:f,labels:{show:!1},crosshairs:{position:"front",stroke:{color:n,width:1,dashArray:4}},tooltip:{enabled:!0}},tooltip:{theme:"light",y:{formatter:function(c){return c+"$"}}},colors:[n]},tt(()=>{let c=getComputedStyle(document.documentElement).getPropertyValue("--primary");c=this.HSLToHex(c),this.chartOptions.tooltip={theme:this.themeService.theme().mode},this.chartOptions.colors=[c],this.chartOptions.stroke.colors=[c],this.chartOptions.xaxis.crosshairs.stroke.color=c})}HSLToHex(t){let n=t.split("%").join("").split(" ").map(Number),p={h:n[0],s:n[1],l:n[2]},{h:m,s:h,l:f}=p,c=f/100,C=h*Math.min(c,1-c)/100,u=D=>{let P=(D+m/30)%12,ft=c-C*Math.max(Math.min(P-3,9-P,1),-1);return Math.round(255*ft).toString(16).padStart(2,"0")};return`#${u(0)}${u(8)}${u(4)}`}ngOnInit(){}ngOnDestroy(){}static{this.\u0275fac=function(e){return new(e||i)(A(ot),A(ht))}}static{this.\u0275cmp=v({type:i,selectors:[["app-transactions"]],standalone:!0,features:[I],decls:21,vars:16,consts:[[1,"flex-col","rounded-lg","bg-background","px-8","py-8","sm:flex-row"],[1,"mb-2","flex","items-center","justify-between"],[1,"flex-col"],[1,"flex","items-center","space-x-1"],[1,"text-lg","font-semibold","text-muted-foreground"],[1,"text-4xl","font-semibold","text-foreground"],[1,"flex","items-center","rounded-md","bg-green-500/25","py-1","pr-2","pl-1","text-xs","font-semibold","text-green-500"],["src","assets/icons/heroicons/outline/arrow-sm-up.svg",3,"svgClass"],[1,"text-sm","text-muted-foreground"],[1,"cursor-pointer","rounded-sm","bg-card","px-1","py-1","text-center","text-xs","text-muted-foreground","hover:bg-muted","hover:text-foreground"],["src","assets/icons/heroicons/outline/dots-horizontal.svg",3,"svgClass"],[1,"mb-3","grid","grid-cols-5","items-center","justify-between","gap-2","text-center"],[1,"cursor-pointer","rounded-md","bg-primary","p-0.5","text-sm","text-primary-foreground","hover:bg-primary"],[1,"cursor-pointer","rounded-md","p-0.5","text-sm","text-gray-400","hover:bg-primary","hover:text-primary-foreground"],[3,"series","chart","legend","dataLabels","fill","stroke","xaxis","yaxis","states","tooltip","colors","grid","title"]],template:function(e,n){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),a(5,"$"),r(),s(6,"span",5),a(7),r(),s(8,"div",6),d(9,"svg-icon",7),a(10," A "),r()(),s(11,"span",8),a(12,"Transactions"),r()(),s(13,"div",9),d(14,"svg-icon",10),r()(),s(15,"div",11)(16,"div",12),a(17,"1 Y"),r(),s(18,"div",13),a(19," 5 Y "),r()(),d(20,"apx-chart",14),r()),e&2&&(l(7),b(n.finalBalance),l(2),g("svgClass","h-4 w-4"),l(5),g("svgClass","h-3 w-3"),l(6),g("series",n.chartOptions.series)("chart",n.chartOptions.chart)("legend",n.chartOptions.legend)("dataLabels",n.chartOptions.dataLabels)("fill",n.chartOptions.fill)("stroke",n.chartOptions.stroke)("xaxis",n.chartOptions.xaxis)("yaxis",n.chartOptions.yaxis)("states",n.chartOptions.states)("tooltip",n.chartOptions.tooltip)("colors",n.chartOptions.colors)("grid",n.chartOptions.grid)("title",n.chartOptions.title))},dependencies:[ct,lt,pt,dt]})}}return i})();var ut=(()=>{class i{constructor(t){this.http=t,this.apiUrl="http://localhost:8080/api/cards"}getUserCards(t){return this.http.get(`${this.apiUrl}/user/${t}`)}static{this.\u0275fac=function(e){return new(e||i)(w(T))}}static{this.\u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function It(i,k){i&1&&d(0,"img",54)}function Ot(i,k){i&1&&d(0,"img",55)}function Ct(i,k){if(i&1&&(s(0,"div",25)(1,"div",26)(2,"aside",27)(3,"label",28),a(4),M(5,"slice"),M(6,"slice"),r(),s(7,"label",29),a(8),r(),s(9,"label",30),a(10),r(),L(11,It,1,0,"img",31)(12,Ot,1,0,"img",32),s(13,"div",33),j(),s(14,"svg",34),d(15,"use",35),r()(),s(16,"svg",36),d(17,"use",37),r()()(),Z(),s(18,"div",38)(19,"div")(20,"small",39),a(21,"Card Holder:"),r(),s(22,"h2",40),a(23),r()(),s(24,"div",41)(25,"div",42)(26,"div",43)(27,"small",44),a(28,"Expiration Date"),r(),s(29,"a",45),a(30),r()()(),s(31,"div",42)(32,"div",46)(33,"span",47),a(34),r()(),s(35,"div",43)(36,"small",44),a(37,"Currency"),r(),s(38,"a",45),a(39),r()()()(),s(40,"div",48)(41,"small",49),a(42,"Balance"),r(),s(43,"h1",50),a(44),M(45,"currency"),r()(),s(46,"div",51)(47,"button",52),a(48),r(),s(49,"button",53),a(50," View Details "),r()()()()),i&2){let t=k.$implicit;l(4),K(" ",W(5,12,t.cardNumber,0,4)," **** **** ",N(6,16,t.cardNumber,-4)," "),l(4),S(" ",t.cardHolder," "),l(2),S(" ",t.expirationDate," "),l(),g("ngIf",t.cardType==="MASTERCARD"),l(),g("ngIf",t.cardType==="VISA"),l(11),b(t.cardHolder),l(7),S(" ",t.expirationDate," "),l(4),b(t.currency),l(5),S(" ",t.currency," "),l(5),b(N(45,19,t.balance,t.currency)),l(4),S(" ",t.status," ")}}var H=(()=>{class i{constructor(t){this.cardService=t,this.user=null,this.userCards=[],this.cardIds=[],this.photo="./assets/images/img-01.jpg"}ngOnInit(){this.loadUser(),this.user&&this.loadCards()}loadUser(){let t=localStorage.getItem("user");t&&(this.user=JSON.parse(t))}loadCards(){this.cardService.getUserCards(this.user.id).subscribe(t=>{this.userCards=t,this.cardIds=this.userCards.map(e=>e.id),localStorage.setItem("cardIds",JSON.stringify(this.cardIds))},t=>{console.error("Error fetching cards:",t)})}static{this.\u0275fac=function(e){return new(e||i)(A(ut))}}static{this.\u0275cmp=v({type:i,selectors:[["app-dashboard"]],standalone:!0,features:[I],decls:32,vars:1,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-semibold","text-primary-foreground"],[1,"grid","grid-cols-1","gap-4","md:grid-cols-1","lg:grid-cols-1","xl:grid-cols-1"],["class","flex min-h-[420px] flex-col rounded-lg bg-background p-8 sm:flex-row",4,"ngFor","ngForOf"],["id","chip"],["id","chip-lines"],["points","0,50 35,50"],["points","0,20 20,20 35,35"],["points","50,0 50,35"],["points","65,35 80,20 100,20"],["points","100,50 65,50"],["points","35,35 65,35 65,65 35,65 35,35"],["points","0,80 20,80 35,65"],["points","50,100 50,65"],["points","65,65 80,80 100,80"],["id","contactless"],["stroke","none","d","M0 0h24v24H0z","fill","none"],["d","M9.172 15.172a4 4 0 0 1 5.656 0"],["d","M6.343 12.343a8 8 0 0 1 11.314 0"],["d","M3.515 9.515c4.686 -4.687 12.284 -4.687 17 0"],[1,"flex","min-h-[420px]","flex-col","rounded-lg","bg-background","p-8","sm:flex-row"],[1,"min-h-[200px]","w-full","flex-1","rounded-md"],[1,"card-front"],["for","cardNumber",1,"number"],["for","cardHolder",1,"name"],["for","expiryMonth",1,"expiry"],["class","cardLogo","src","https://simey-credit-card.netlify.app/img/logos/master.svg",4,"ngIf"],["class","cardLogo","src","https://simey-credit-card.netlify.app/img/logos/visa.svg",4,"ngIf"],[1,"chip"],["role","img","viewBox","0 0 100 100","aria-label","Chip"],["href","#chip-lines"],["role","img","viewBox","0 0 24 24","aria-label","Contactless",1,"contactless"],["href","#contactless"],[1,"mt-4","flex","flex-1","flex-col","justify-between","space-y-2","sm:ml-6","md:mt-0"],[1,"font-semibold","text-muted-foreground"],[1,"text-2xl","font-semibold","text-foreground"],[1,"flex","space-x-8"],[1,"flex","items-center","space-x-2"],[1,"flex","flex-col"],[1,"text-xs","text-muted-foreground"],["href","",1,"text-xs","font-semibold","text-foreground","hover:text-primary"],[1,"flex","h-7","w-7","flex-shrink-0","items-center","justify-center","rounded-full","bg-primary","text-center"],[1,"text-xs","font-semibold","text-primary-foreground"],[1,"rounded-md","border","border-dashed","border-border","p-4","text-center"],[1,"text-muted-foreground"],[1,"text-3xl","font-semibold","text-foreground"],[1,"flex","items-center","justify-between"],[1,"hover:bg-primary-600","flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-semibold","text-primary-foreground"],[1,"lex-none","rounded-md","bg-card","px-4","py-2.5","text-xs","font-semibold","text-muted-foreground","hover:bg-muted","hover:text-foreground"],["src","https://simey-credit-card.netlify.app/img/logos/master.svg",1,"cardLogo"],["src","https://simey-credit-card.netlify.app/img/logos/visa.svg",1,"cardLogo"]],template:function(e,n){e&1&&(s(0,"div")(1,"div",0)(2,"div",1)(3,"h3",2),a(4,"Bank Dashboard"),r(),s(5,"div",3)(6,"a",4),a(7,"Dashboards"),r(),s(8,"span"),a(9," - Cards"),r()()(),s(10,"div",5)(11,"button",6),a(12," Add card "),r()()(),s(13,"div",7),L(14,Ct,51,22,"div",8),r(),j(),s(15,"svg",9)(16,"g",10),d(17,"polyline",11)(18,"polyline",12)(19,"polyline",13)(20,"polyline",14)(21,"polyline",15)(22,"polyline",16)(23,"polyline",17)(24,"polyline",18)(25,"polyline",19),r()(),s(26,"svg",20),d(27,"path",21)(28,"path",22)(29,"path",23)(30,"path",24),r(),Z(),d(31,"app-transactions"),r()),e&2&&(l(14),g("ngForOf",n.userCards))},dependencies:[mt,st,et,it,rt,nt]})}}return i})();var Dt=[{path:"",component:H,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:H},{path:"**",redirectTo:"errors/404"}]}],gt=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=y({type:i})}static{this.\u0275inj=x({imports:[B.forChild(Dt),B]})}}return i})();var Gt=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=y({type:i})}static{this.\u0275inj=x({imports:[gt]})}}return i})();export{Gt as DashboardModule};
